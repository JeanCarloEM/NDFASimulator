!function(s,t,i){s.lfadrw=function(s,i,h,d){this.d={ctx:null,canvas:null,q:null,sizes:null,dts:null,c:{bk:"#333333",borda:"#3778db",bola:"#none",bolativa:"#none",bordativa:"#ff9900",setas:"#aaa",setativa:"#9966ff"}},this.mt={cos:function(s){return Math.cos(s/180*Math.PI)},sin:function(s){return Math.sin(s/180*Math.PI)},tan:function(s){return Math.tan(s/180*Math.PI)},radianToAngle:function(s){return s*(180/Math.PI)},angleToRadians:function(s){return s*(Math.PI/180)},cosToAngle:function(s){return this.radianToAngle(Math.acos(s))},sinToAngle:function(s){return this.radianToAngle(Math.asin(s))},tanToAngle:function(s){return this.radianToAngle(Math.atan(s))},sinToCos:function(s){return cos(sinToAngle(s))},sinToTan:function(s){return tan(sinToAngle(s))},cosToSin:function(s){return sin(cosToAngle(s))},cosToTan:function(s){return tan(cosToAngle(s))},tanToSin:function(s){return sin(tanToAngle(s))},tanToCos:function(s){return cos(tanToAngle(s))},findAngle:function(s,t,i,h){return Math.atan2(h-t,i-s)}},this.isCanvas=function(s){try{return s&&"CANVAS"===t(s).prop("tagName").toUpperCase()}catch(i){return!1}},this.canvasInit=function(s){this.isCanvas(s)&&(this.d.canvas=t(s),this.d.ctx=this.d.canvas.get(0).getContext("2d"),this.d.ctx.globalCompositeOperation="source-over",this.d.ctx.imageSmoothingEnabled=!0)},this.calcSizes=function(s,t){this.d.s={},this.d.s.d=t,this.d.s.r=t/2,this.d.s.b=t*(s.destinos.length<6?12/s.destinos.length:2),this.d.s.br=this.d.s.b/2,this.d.s.angs=360/s.destinos.length,this.d.s.R=this.d.s.br/this.mt.sin(this.d.s.angs/2),this.d.s.n=this.d.s.br/this.mt.tan(this.d.s.angs/2),this.d.s.D=2*this.d.s.R,this.d.s.w=this.d.s.h=2*this.d.s.n+this.d.s.r+2*this.d.s.d,this.d.s.x=this.d.s.w/2,this.d.s.y=this.d.s.h/2,this.d.s.q=[];for(var i=0;i<s.destinos.length;i++){var h=i*this.d.s.angs;0===h?this.d.s.q.push({x:this.d.s.x-this.d.s.n,y:this.d.s.y,quadrante:0}):90===h?this.d.s.q.push({x:this.d.s.x,y:this.d.s.y-this.d.s.n,quadrante:1}):180===h?this.d.s.q.push({x:this.d.s.x+this.d.s.n,y:this.d.s.y,quadrante:2}):270===h?this.d.s.q.push({x:this.d.s.x,y:this.d.s.y+this.d.s.n,quadrante:3}):h>0&&90>h?this.d.s.q.push({x:this.d.s.x-this.d.s.n*this.mt.cos(h),y:this.d.s.y-this.d.s.n*this.mt.sin(h),quadrante:0}):h>90&&180>h?this.d.s.q.push({x:this.d.s.x+this.d.s.n*this.mt.cos(180-h),y:this.d.s.y-this.d.s.n*this.mt.sin(180-h),quadrante:1}):h>180&&270>h?this.d.s.q.push({x:this.d.s.x+this.d.s.n*this.mt.cos(h-180),y:this.d.s.y+this.d.s.n*this.mt.sin(h-180),quadrante:2}):h>270&&360>h&&this.d.s.q.push({x:this.d.s.x-this.d.s.n*this.mt.cos(360-h),y:this.d.s.y+this.d.s.n*this.mt.sin(360-h),quadrante:3}),this.d.s.q[this.d.s.q.length-1].ang=h}},this.calcBordaPoints=function(s,t,i){i=i===!0||i===!1?i:!1,minf=(3===this.d.s.q[s].quadrante||2===this.d.s.q[s].quadrante)&&"c"===t,mto=(1===this.d.s.q[s].quadrante||0===this.d.s.q[s].quadrante)&&"c"===t;var h=this.d.s.angs/2,d={y:this.mt.sin(this.d.s.q[s].to[t].ang+h)*(this.d.s.r*(i||mto?1.25:1)),x:this.mt.cos(this.d.s.q[s].to[t].ang+h)*(this.d.s.r*(i||mto?1.25:1))};this.d.s.q[t].y<this.d.s.q[s].y?d.y=this.d.s.q[s].y-d.y:d.y=this.d.s.q[s].y+d.y,this.d.s.q[t].x<this.d.s.q[s].x?d.x=this.d.s.q[s].x-d.x:d.x=this.d.s.q[s].x+d.x;var n={y:this.mt.sin(this.d.s.q[s].to[t].ang-h/2)*(this.d.s.r*(i||minf?1.25:1)),x:this.mt.cos(this.d.s.q[s].to[t].ang-h/2)*(this.d.s.r*(i||minf?1.25:1))};return this.d.s.q[t].y<this.d.s.q[s].y?n.y=this.d.s.q[s].y-n.y:n.y=this.d.s.q[s].y+n.y,this.d.s.q[t].x<this.d.s.q[s].x?n.x=this.d.s.q[s].x-n.x:n.x=this.d.s.q[s].x+n.x,3===this.d.s.q[s].quadrante||2===this.d.s.q[s].quadrante?{sup:d,inf:n}:{sup:n,inf:d}},this.calcAbertura=function(s,t){if("object"==typeof this.d.s&&Array.isArray(this.d.s.q)&&this.d.s.q.length>=s&&this.d.s.q.length>=t){if(s===t){t="c";var i={x:this.d.s.w/2,y:this.d.s.h/2};this.d.s.q[t]={x:i.x+2*Math.abs(i.x-this.d.s.q[s].x)*(this.d.s.q[s].x>i.x?1:-1),y:i.y+2*Math.abs(i.y-this.d.s.q[s].y)*(this.d.s.q[s].y>i.y?1:-1)}}if(this.d.s.q[s].hasOwnProperty("to")&&Array.isArray(this.d.s.q[s])&&void 0!==this.d.s.q[s][t])return this.d.s.q[s][t];var h=null;if(this.d.s.q[s].x===this.d.s.q[t].x)h=90;else if(this.d.s.q[s].y===this.d.s.q[t].y)h=0;else var d=Math.abs(this.d.s.q[s].x-this.d.s.q[t].x),n=Math.abs(this.d.s.q[s].y-this.d.s.q[t].y),h=this.mt.tanToAngle(n/d);if(null!==h){if((!this.d.s.q[s].hasOwnProperty("to")||Array.isArray(this.d.s.q[s]))&&(this.d.s.q[s].to=[]),!(t in this.d.s.q[s].to)&&(this.d.s.q[s].to[t]={ang:h},this.d.s.q[s].to[t].destcolat=this.d.s.q[t].y<this.d.s.q[s].y&&this.d.s.q[t].x<this.d.s.q[s].x?0:this.d.s.q[t].y<this.d.s.q[s].y&&this.d.s.q[t].x>this.d.s.q[s].x?1:this.d.s.q[t].y>this.d.s.q[s].y&&this.d.s.q[t].x>this.d.s.q[s].x?2:this.d.s.q[t].y>this.d.s.q[s].y&&this.d.s.q[t].x<this.d.s.q[s].x?3:this.d.s.q[t].y===this.d.s.q[s].y&&this.d.s.q[t].x<this.d.s.q[s].x?-1:this.d.s.q[t].y===this.d.s.q[s].y&&this.d.s.q[t].x>this.d.s.q[s].x?-2:this.d.s.q[t].y<this.d.s.q[s].y&&this.d.s.q[t].x===this.d.s.q[s].x?-3:this.d.s.q[t].y>this.d.s.q[s].y&&this.d.s.q[t].x===this.d.s.q[s].x?-4:null,null==this.d.s.q[s].to[t].destcolat))return-2;if(this.d.s.q[s].to[t].pts=this.calcBordaPoints(s,t,!1),(!this.d.s.q[t].hasOwnProperty("to")||Array.isArray(this.d.s.q[t]))&&(this.d.s.q[t].to=[]),!(s in this.d.s.q[t].to)&&(this.d.s.q[t].to[s]={ang:h},this.d.s.q[t].to[s].destcolat=0===this.d.s.q[s].to[t].destcolat?2:1===this.d.s.q[s].to[t].destcolat?3:2===this.d.s.q[s].to[t].destcolat?0:3===this.d.s.q[s].to[t].destcolat?1:-1===this.d.s.q[s].to[t].destcolat?-2:-2===this.d.s.q[s].to[t].destcolat?-1:-3===this.d.s.q[s].to[t].destcolat?-4:-4===this.d.s.q[s].to[t].destcolat?-3:null,null===this.d.s.q[t].to[s].destcolat))return-3;this.d.s.q[t].to[s].pts=this.calcBordaPoints(t,s,!0);var a={to:this.d.s.q[t].to[s],from:this.d.s.q[s].to[t]};return delete this.d.s.q.c,a}}return null},this.draw={colorir:function(s,t,i){function h(s,t){s.strokeStyle=t,s.lineWidth=.05*this.d.s.r,s.stroke()}function d(s,t){s.fillStyle=t,s.fill()}/(^#[0-9A-F]{6})|(^#[0-9A-F]{3}|rgba\([ \,0-9]+\))$/i.test(t)&&d(s,t),/(^#[0-9A-F]{6})|(^#[0-9A-F]{3}|rgba\([ \,0-9]+\))$/i.test(i)&&h(s,i)},circ:function(s,t,i,h,d,n){s.beginPath(),s.arc(t,i,h,0,2*Math.PI),function(){this.draw.colorir(s,d,n)}(),function(){return this.d.ctx}().closePath()},arrow:function(s,t,i){function d(s,t,i,h,d,n){var a=d/2,r=n/2;s.save(),s.translate(t,i),s.rotate(h),s.translate(-a,-r),s.beginPath(),s.moveTo(0,0),s.lineTo(0,1*n),s.lineTo(1*d,1*r),s.closePath(),s.fill(),s.restore()}function n(t,i,h,n,a,r,o){!function(){this.d.ctx.beginPath(),this.d.ctx.fillStyle=o?this.d.c.setativa:this.d.c.setas,this.d.ctx.moveTo(h.x,h.y),this.d.ctx.quadraticCurveTo(t,i,n.x,n.y),this.d.ctx.strokeStyle=o?this.d.c.setativa:this.d.c.setas,this.d.ctx.stroke(),this.d.ctx.closePath();var a=this.mt.findAngle(t,i,this.d.s.q[r].x,this.d.s.q[r].y);d(this.d.ctx,n.x,n.y,a,.25*this.d.s.r,.25*this.d.s.r),o&&(this.d.ctx.beginPath(),this.d.ctx.font=.5*this.d.s.r+"px Arial",this.d.ctx.fillStyle=this.d.c.setativa,this.d.ctx.textAlign="left",this.d.ctx.fillText(this.d.dts.trans[s][r],t+5,i+5),this.d.ctx.closePath())}()}!function(){var d=this.calcAbertura(s,t),a=this.d.s.q[s].quadrante,r=this.d.s.q[t].quadrante,o=(this.d.s.q[t].x,this.d.s.q[t].y,this.d.s.q[s].x,this.d.s.q[s].y,pt=null),e=0,q=0;s===t?(o=d.from.pts.sup,pt=d.from.pts.inf,e=0===a||3===a?-this.d.s.d:this.d.s.d,q=0===a||1===a?-this.d.s.d:this.d.s.d):Math.abs(t-s)<=1||this.d.s.q[t].x>=this.d.s.q[s].x-this.d.s.r/2&&this.d.s.q[t].x<=this.d.s.q[s].x+this.d.s.r/2||this.d.s.q[t].y>=this.d.s.q[s].y-this.d.s.r/2&&this.d.s.q[t].y<=this.d.s.q[s].y+this.d.s.r/2?t>s?(o=d.from.pts.sup,pt=d.to.pts.inf):(o=d.from.pts.sup,pt=d.to.pts.inf):(0===a&&(o=d.from.pts.inf,pt=d.to.pts.inf,1>=r?(q+=this.d.s.r,e+=this.d.s.r,s>t&&(q+=.7*this.d.s.d,e+=.7*this.d.s.d)):r>1&&(q-=this.d.s.r,e-=this.d.s.r,s>t&&(q-=.7*this.d.s.d,e-=.7*this.d.s.d))),1===a&&(o=d.from.pts.inf,pt=d.to.pts.inf,0===r||3===r?(q+=this.d.s.r,e+=this.d.s.r,s>t&&(q+=.7*this.d.s.d,e+=.7*this.d.s.d)):(q-=this.d.s.r,e-=this.d.s.r,s>t&&(q-=.7*this.d.s.d,e-=.7*this.d.s.d))),2===a&&(o=d.from.pts.inf,pt=d.to.pts.inf,2===r||3===r?(q-=this.d.s.r,e-=this.d.s.r,s>t&&(q-=.7*this.d.s.d,e-=.7*this.d.s.d)):(q-=this.d.s.r,e-=this.d.s.r,s>t&&(q-=.7*this.d.s.d,e-=.7*this.d.s.d))),3===a&&(o=d.from.pts.inf,pt=d.to.pts.inf,0===r||3===r?(q-=this.d.s.r,e+=this.d.s.r,s>t&&(q-=.7*this.d.s.d,e+=.7*this.d.s.d)):(q-=this.d.s.r,e-=this.d.s.r,s>t&&(q-=.7*this.d.s.d,e-=.7*this.d.s.d)))),e+=(pt.x<o.x?pt.x:o.x)+Math.abs(pt.x-o.x)/2,q+=(pt.y<o.y?pt.y:o.y)+Math.abs(pt.y-o.y)/2,n(e,q,o,pt,h,t,i),0===s&&n(0,this.d.s.h/2,{x:0,y:this.d.s.h/2},{x:this.d.s.q[s].x-1.25*this.d.s.r,y:this.d.s.h/2},h,0,!1)}()},q:function(s,t,i,h){i=i===!0||i===!1?i:!1,h=h===!0||h===!1?h:!1,function(){this.draw.circ(this.d.ctx,s,t,this.d.s.r,h?this.d.c.bolativa:this.d.c.bola,h?this.d.c.bordativa:this.d.c.borda),i&&this.draw.circ(this.d.ctx,s,t,.8*this.d.s.r,h?this.d.c.bolativa:this.d.c.bola,h?this.d.c.bordativa:this.d.c.borda)}()}},this.init=function(s,t,i,h){if(this.isCanvas(s)&&Array.isArray(t.destinos)&&t.destinos.length>0&&i>1){this.canvasInit(s),this.d.dts=t,this.calcSizes(t,i),this.d.canvas.attr("width",this.d.s.w),this.d.canvas.attr("height",this.d.s.h),this.d.canvas.width=this.d.canvas.attr("width"),this.d.canvas.height=this.d.canvas.attr("height");for(var d=0;d<t.destinos.length;d++)for(var n=0;n<t.destinos[d].length;n++)for(var a=Array.isArray(t.destinos[d][n])?t.destinos[d][n]:[t.destinos[d][n]],r=0;r<a.length;r++)if("number"==typeof a[r]&&a[r]>=0){var o=Array.isArray(h)&&h.indexOf(d)>=0||!Array.isArray(h)&&0===d;this.draw.arrow(d,a[r],o)}this.d.ctx.font=.25*i+"px Arial";for(var d=0;d<this.d.s.q.length;d++)this.draw.q(this.d.s.q[d].x,this.d.s.q[d].y,t.finais.indexOf(d)>=0,Array.isArray(h)?h.indexOf(d)>=0:!Array.isArray(h)&&0===d),this.d.ctx.fillStyle=this.d.c.setas,this.d.ctx.textAlign="center",this.d.ctx.fillText("q"+d,this.d.s.q[d].x,this.d.s.q[d].y+.25*i/3);return!0}return!1},this.init(s,i,h,d)}}(window,"object"==typeof jQuery?jQuery:Zepto,function(s){console.log(s)});