(function(d,c){d.updateTbl=function(m,a,p,n,o,k){var l=c("#passos tr");if((!l)||(l.length<=0)){if((!c("article"))||(c("article").length<=0)){throw"ARTICLE NADA AINDA"}c("article").append("<div><table id='passos' cellpadding='0' cellspacing='0'><tr></tr><tr></tr></table></div>");l=c("#passos tr")}if((k===0)||(k===2)){if(c("#passos tr:last-of-type td").length<=a){l.append("<td id='td_"+a+"'>")}if(c("#passos tr td:last-of-type div.q"+o).length<=0){var b=c("#passos tr:last-of-type td#td_"+a);b.append("<div class='"+((k===0)?" epson":"")+((d.lfacalc.dts.finais.indexOf(o)>=0)?" final":"")+" q"+o+"'><span>q"+o+"</span></div>")}}if((k===3)&&(!c("#passos tr:first-of-type td#td_"+(a-1)).html())){c("#passos tr:first-of-type td#td_"+(a-1)).html(m)}};d.setSigma=function(){var a=c("section.principal div.sigma input[type='text']");a.val(a.val().replace(/(.)(?=.*\1)/g,""));if(a.val()!==a.attr("old")){c("#estados").html(" ");c("section.principal div.avaliar").css("display","none");if(a.val().length>1){var f="";for(var b=0;b<a.val().length;b++){f+="<td>"+((a.val()[b]==="@")?"&epsilon;":a.val()[b])+"</td>"}c("#estados").html("<tr><td>ST</td>"+f+"</tr>");c("section.principal div.tbl").css("display","inline-block")}a.attr("old",a.val())}};d.validadeEstados=function(a,n){n=(n===true||n===false)?n:false;a=n?a:c(this);a.removeClass("vazio erro");var e=a.val().replace(/[\[\],\s]*/g,"");if(a.val().length<=0){a.addClass("vazio");return true}var i=true;if(e.length>0){var m=new RegExp(a.attr("regex"));if(m.test(a.val())){var b=c("#estados tr.estados").length;for(var l=0;l<e.length;l++){if(parseInt(e[l])>=b){i=false;break}}}else{i=false}}else{i=false}if(!i){a.addClass("erro");return false}return true};c(document).ready(function(){c("section.principal > div div.sigmago").on("click",function(){d.setSigma()});c("section.principal div.sigma input").on("keyup",function(a){if(a.keyCode===13){c(this).blur()}});c("section.principal div.sigma input").on("blur",function(a){d.setSigma()});c("section.principal div.avaliar input").on("keyup",function(a){if(a.keyCode===13){c(this).blur()}});c("section.principal div.avaliar input").on("blur",function(a){c("section.principal div.avaliar > div").trigger("click")});c("section.principal div.tbl button").on("click",function(){var a=c("section.principal > div input[type='text']");if(a.attr("old").length>1){var f="";for(var b=0;b<a.val().length;b++){f+="<td><input name='q"+(c("#estados tr").length-1)+"_"+(c.trim(c("#estados tr:first-of-type td").eq(b+1).text()))+"' type='text' class='destinos' regex='^s?([0-9]|\\[s?[0-9](s?,s?[0-9])*s?])?s?$'></input></td>"}c("#estados").append("<tr class='estados q"+(c("#estados tr").length-1)+"' st='"+(c("#estados tr").length-1)+"'><td class=\"estado\" st='"+(c("#estados tr").length-1)+"'>q"+(c("#estados tr").length-1)+"</td>"+f+"</tr>");c("#estados tr td:first-of-type").off("click");c("#estados tr td input").off("keyup");c("#estados tr td input").off("blur");c("#estados tr td input").on("keyup",d.validadeEstados);c("#estados tr td input").on("blur",d.validadeEstados);c("#estados tr > td:first-of-type").on("click",function(e){c(this).toggleClass("checked")});c("section.principal div.avaliar").css("display","block")}});c("section.principal div.avaliar > div").on("click",function(){if(c("section.principal div.avaliar input").val().length>0){var r=c("#estados tr td input");var i=true;if(r.length>0){for(var s=0;s<r.length;s++){var p=c(r[s]);if(!d.validadeEstados(p,true)){i=false;break}}}else{i=false}if(i){var a={abto:(c("section.principal div.sigma input").val().split("")),destinos:[],start:0,finais:[],steps:[[]]};for(var s=0;s<a.abto.length;s++){a.abto[s]=a.abto[s]==="@"?null:a.abto[s]}var j=c("#estados tr > td.estado:first-of-type");for(var s=0;s<j.length;s++){if(c(j[s]).hasClass("checked")){a.finais.push(parseInt(c(j[s]).attr("st")))}}var q=c("#estados tr.estados");for(var s=0;s<q.length;s++){var v=c(q[s]).attr("st");var b=[];for(var t=0;t<a.abto.length;t++){var u=c("#estados tr td input[name='q"+v+"_"+a.abto[t]+"']").val();b.push(!u?null:(parseInt(u)))}a.destinos.push(b)}if(!d.lfacalc){d.lfacalc=new d.lfa()}c("article").html(" ");if(d.lfacalc.match(a,c("section.principal div.avaliar input").val(),d.updateTbl)){c("div.resultado").html("O Automoto reconhece a string. String aceita!")}else{c("div.resultado").html("O Automoto NÃO reconhece a string. String rejeitada!")}}else{alert("O estados destinos não estão preenchidos corretamente!")}}else{alert("Nenhuma string a ser avaliada.")}})})})(window,(typeof jQuery==="object"?jQuery:Zepto));